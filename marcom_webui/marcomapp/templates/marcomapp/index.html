{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Component Search</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
  </head>
  <body>
    <h1>Search Components</h1>

    <!-- Filter Selection Form -->
    <form method="get" action="{% url 'index' %}">
      <div>
        <label>Domain:</label>
        <input type="checkbox" name="comp_domain" value="PROMPT" /> PROMPT
        <input type="checkbox" name="comp_domain" value="APP-SWE" /> APP-SWE
        <input type="checkbox" name="comp_domain" value="DGTLX" /> DGTLX
        <input type="checkbox" name="comp_domain" value="GROWTH" /> GROWTH
        <input type="checkbox" name="comp_domain" value="FINTK" /> FINTK
        <input type="checkbox" name="comp_domain" value="PROCESS" /> PROCESS
        <input type="checkbox" name="comp_domain" value="AD-PROFILE" />
        AD-PROFILE
      </div>

      <div>
        <label>About:</label>
        <input type="checkbox" name="comp_about" value="AD" /> AD
        <input type="checkbox" name="comp_about" value="CIAD" /> CIAD
        <input type="checkbox" name="comp_about" value="ITD2" /> ITD2
        <input type="checkbox" name="comp_about" value="PALMA$$" /> PALMA$$
        <input type="checkbox" name="comp_about" value="SFENA" /> SFENA
        <input type="checkbox" name="comp_about" value="SLB" /> SLB
        <input type="checkbox" name="comp_about" value="TRT" /> TRT
      </div>

      <div>
        <label>Context:</label>
        <input type="checkbox" name="comp_context" value="Case-Experience" />
        Case-Experience
        <input type="checkbox" name="comp_context" value="Submission" />
        Submission
        <input
          type="checkbox"
          name="comp_context"
          value="Capability-Expertise"
        />
        Capability-Expertise
        <input type="checkbox" name="comp_context" value="Value-Proposal" />
        Value-Proposal
        <input type="checkbox" name="comp_context" value="Service-Offer" />
        Service-Offer
        <input
          type="checkbox"
          name="comp_context"
          value="Profile Description"
        />
        Profile Description
      </div>

      <div>
        <label>Size:</label>
        <input type="radio" name="comp_size" value="bullet" /> Bullet (<= 50
        characters)
        <input type="radio" name="comp_size" value="summary" /> Summary (<= 500
        characters)
        <input type="radio" name="comp_size" value="description" /> Description
        (<= 1000 characters)
        <input type="radio" name="comp_size" value="overview" /> Overview (<=
        3000 characters)
      </div>

      <button type="submit" name="search">Search</button>
    </form>

    <!-- Display Results -->
    <h2>Results</h2>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Domain</th>
          <th>About</th>
          <th>Context</th>
          <th>Size</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for component in components %}
        <tr>
          <td>{{ component.name }}</td>
          <td>{{ component.domain }}</td>
          <td>{{ component.about }}</td>
          <td>{{ component.context }}</td>
          <td>{{ component.size }}</td>
          <td>
            <!-- Generate the URL first and store it in a variable -->
            {% url 'view_component' component.key as view_component_url %}
            <button onclick="window.open('{{ view_component_url }}', '_blank')">
              Activate
            </button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>
