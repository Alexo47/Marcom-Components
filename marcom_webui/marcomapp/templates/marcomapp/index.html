{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marcom Components</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <header>
        <h1 style="background-color: navy; color: white;">Marcom Components</h1>
    </header>

    <!-- Filters Section -->
    <form method="GET" action="/" id="search-form">
        <!-- Domain filter -->
        <div class="filter">
            <label>Domain:</label><br />
            <label><input type="checkbox" name="comp_domain" value="PROMPT">PROMPT</label>
            <label><input type="checkbox" name="comp_domain" value="APP-SWE">APP-SWE</label>
            <label><input type="checkbox" name="comp_domain" value="DGTLX">DGTLX</label>
            <label><input type="checkbox" name="comp_domain" value="GROWTH">GROWTH</label>
            <label><input type="checkbox" name="comp_domain" value="FINTK">FINTK</label>
            <label><input type="checkbox" name="comp_domain" value="PROCESS">PROCESS</label>
            <label><input type="checkbox" name="comp_domain" value="AD-PROFILE">AD-PROFILE</label>
        </div>

        <!-- About filter -->
        <div class="filter">
            <label>About:</label><br />
            <label><input type="checkbox" name="comp_about" value="AD">AD</label>
            <label><input type="checkbox" name="comp_about" value="CIAD">CIAD</label>
            <label><input type="checkbox" name="comp_about" value="ITD2">ITD2</label>
            <label><input type="checkbox" name="comp_about" value="PALMA$$">PALMA$$</label>
            <label><input type="checkbox" name="comp_about" value="SFENA">SFENA</label>
            <label><input type="checkbox" name="comp_about" value="SLB">SLB</label>
            <label><input type="checkbox" name="comp_about" value="TRT">TRT</label>
        </div>

        <!-- Context filter -->
        <div class="filter">
            <label>Context:</label><br />
            <label><input type="checkbox" name="comp_context" value="Case-Experience">Case-Experience</label>
            <label><input type="checkbox" name="comp_context" value="Submission">Submission</label>
            <label><input type="checkbox" name="comp_context" value="Capability-Expertise">Capability-Expertise</label>
            <label><input type="checkbox" name="comp_context" value="Value-Proposal">Value-Proposal</label>
            <label><input type="checkbox" name="comp_context" value="Service-Offer">Service-Offer</label>
            <label><input type="checkbox" name="comp_context" value="Profile Description">Profile Description</label>
        </div>

        <!-- Size filter (radio buttons) -->
        <div class="filter">
            <label>Size:</label><br />
            <label><input type="radio" name="comp_size" value="bullet">Bullet (up to 50)</label>
            <label><input type="radio" name="comp_size" value="summary">Summary (up to 500)</label>
            <label><input type="radio" name="comp_size" value="description">Description (up to 1000)</label>
            <label><input type="radio" name="comp_size" value="overview">Overview (up to 3000)</label>
        </div>

        <!-- Submit button -->
        <button type="submit" style="background-color: green; color: white; padding: 10px 20px;">Search</button>
    </form>

    <!-- Search Results -->
    {% if components %}
        <table>
            <thead style="background-color: green; color: white;">
                <tr>
                    <th>Name</th>
                    <th>Domain</th>
                    <th>About</th>
                    <th>Context</th>
                    <th>Size</th>
                </tr>
            </thead>
            <tbody>
                {% for component in components %}
                <tr>
                    <td class="clickable"
                        onclick="openModal('{{ component.name|escapejs }}',
                                           '{{ component.domain|escapejs }}',
                                           '{{ component.about|escapejs }}',
                                           '{{ component.context|escapejs }}',
                                           '{{ component.size|escapejs }}',
                                           '{{ component.content|escapejs }}')">
                        {{ component.name }}
                    </td>
                    <td>{{ component.domain }}</td>
                    <td>{{ component.about }}</td>
                    <td>{{ component.context }}</td>
                    <td>{{ component.size }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No components found. Please use the filters and search again.</p>
    {% endif %}

    <!-- Modal for component details -->
    <div id="componentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="componentTitle"></h2>
            <p><strong>Domain:</strong> <span id="componentDomain"></span></p>
            <p><strong>About:</strong> <span id="componentAbout"></span></p>
            <p><strong>Context:</strong> <span id="componentContext"></span></p>
            <p><strong>Size:</strong> <span id="componentSize"></span></p>
            <div class="component-content">
                <h3>Content:</h3>
                <p id="componentContent"></p>
                <button id="copyButton" onclick="copyToClipboard()">Copy</button>
            </div>
        </div>
    </div>

    <script src="{% static 'js/scripts.js' %}"></script>
</body>
</html>
